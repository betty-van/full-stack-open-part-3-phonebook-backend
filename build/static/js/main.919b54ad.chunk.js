(this["webpackJsonpphonebook-app"]=this["webpackJsonpphonebook-app"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),s=t(2),u=t(3),l=t.n(u),i="/api/persons",m=function(){return l.a.get(i).then((function(e){return e.data}))},f=function(e){return l.a.post(i,e).then((function(e){return e.data}))},d=function(e){return l.a.delete("".concat(i,"/").concat(e)).then((function(){return"".concat(e," was removed from the server")}))},b=function(e,n){return l.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.person,t=e.setPersons,a=e.persons,o=e.setErrorMessage,c=e.setSuccessMessage;return r.a.createElement("button",{onClick:function(){var e=window.confirm("Are you sure you want to delete ".concat(n.name,"?"));console.log(e),!0===e&&d(n.id).then((function(e){console.log("".concat(n.name),e)})).then((function(){var e=a.filter((function(e){return e.name!==n.name}));t(e),c("Deleted '".concat(n.name,"' ")),setTimeout((function(){c(null)}),5e3)})).catch((function(e){o("Unable to delete '".concat(n.name,"'")),setTimeout((function(){o(null)}),5e3)}))}},"delete")},E=function(e){var n=e.persons,t=e.setPersons,a=e.newFilter,o=e.setErrorMessage,c=e.setSuccessMessage;return n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())})).map((function(e){return r.a.createElement("p",{key:e.id}," ",e.name," ",e.number," ",r.a.createElement(p,{person:e,persons:n,setPersons:t,setErrorMessage:o,setSuccessMessage:c}))}))},h=t(14),g=function(e){var n=e.persons,t=e.newName,a=e.newNumber,o=e.setNewName,c=e.setNewNumber,s=e.setPersons,u=e.setErrorMessage,l=e.setSuccessMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r=n.map((function(e){return e.name}));if(-1!==r.indexOf(t)){var i=window.confirm("".concat(t," already exists in the phonebook, replace the old number with a new one?")),m=n.find((function(e){return e.name===t})),d=Object(h.a)({},m,{number:a});!0===i&&(b(m.id,d).then((function(e){console.log(e),s(n.map((function(n){return n.id!==m.id?n:e}))),l("Updated '".concat(t," to ").concat(a,"' ")),setTimeout((function(){l(null)}),5e3)})).catch((function(e){u("Unable to change number of '".concat(m.name,"'")),setTimeout((function(){u(null)}),5e3)})),o(""),c(""))}else if(-1===r.indexOf(t)){f({name:t,number:a}).then((function(e){s(n.concat(e)),o(""),c(""),l("Added '".concat(t," ").concat(a,"' ")),setTimeout((function(){l(null)}),5e3)})).catch((function(e){u("Unable to add '".concat(t,"'")),setTimeout((function(){u(null)}),5e3)}))}}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},v=function(e){var n=e.setNewFilter,t=e.newFilter;return r.a.createElement("div",null,"filter name: ",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}}))},w=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},N=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"success"},n)},O=(t(37),function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),u=Object(s.a)(c,2),l=u[0],i=u[1],f=Object(a.useState)(""),d=Object(s.a)(f,2),b=d[0],p=d[1],h=Object(a.useState)(""),O=Object(s.a)(h,2),j=O[0],S=O[1],M=Object(a.useState)(null),k=Object(s.a)(M,2),F=k[0],P=k[1],y=Object(a.useState)(null),C=Object(s.a)(y,2),T=C[0],x=C[1];return Object(a.useEffect)((function(){m().then((function(e){console.log(e),o(e)}))}),[]),void 0===t?r.a.createElement("div",null,"No persons in phonebook"):r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(w,{message:F}),r.a.createElement(N,{message:T}),r.a.createElement(v,{newFilter:j,setNewFilter:S}),r.a.createElement("h2",null,"add a new phone number"),r.a.createElement(g,{newName:l,newNumber:b,persons:t,setPersons:o,setNewName:i,setNewNumber:p,setErrorMessage:P,setSuccessMessage:x}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{persons:t,setPersons:o,newFilter:j,setErrorMessage:P,setSuccessMessage:x}))});c.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.919b54ad.chunk.js.map